---
import { ArrowLeft, ExternalLink } from "lucide-preact";

import Footer from "~/components/Footer.astro";
import Head from "~/components/Head.astro";
import { SITE_TITLE } from "~/constants";
import Document from "~/layouts/Document.astro";

const links = [
  {
    title: "Luminal",
    url: "https://github.com/luminal-ai/luminal",
    description: "Deep learning at the speed of light.",
    category: "Tools",
  },
  {
    title: "LLMs from Scratch",
    url: "https://github.com/rasbt/LLMs-from-scratch",
    description:
      "Implement a ChatGPT-like LLM in PyTorch from scratch, step by step",
    category: "Others",
  },
  {
    title: "How to Scale Your Model",
    url: "https://jax-ml.github.io/scaling-book/",
    description:
      "Training LLMs often feels like alchemy, but understanding and optimizing the performance of your models doesn't have to. This book aims to demystify the science of scaling language models.",
    category: "Online Books",
  },
];

const groupedLinks = links.reduce(
  (acc, link) => {
    const category = link.category;
    if (!acc[category]) {
      acc[category] = [];
    }
    acc[category].push(link);
    return acc;
  },
  {} as Record<string, typeof links>,
);
---

<Head title={`${SITE_TITLE} ─ internet`} />

<Document>
  <main
    class="flex flex-col h-full mx-auto max-w-3xl px-4 sm:px-6 lg:px-8 py-16 space-y-12 pb-8"
  >
    <!-- Brutalist Hero -->
    <section class="space-y-4 pt-8">
      <h1
        class="font-[Fraunces] text-5xl sm:text-6xl font-bold tracking-tight text-gray-50 leading-[0.9]"
      >
        <span class="text-primary-500">◇</span> Internet
      </h1>
      <p class="text-gray-500 text-base">
        A collection of interesting links, tools, articles, and resources I've
        found across the web.
      </p>
    </section>

    <div class="z-10">
      <div class="space-y-10">
        {
          Object.entries(groupedLinks).map(([category, categoryLinks]) => (
            <div class="space-y-4">
              <h3 class="flex items-center font-mono text-xs uppercase tracking-[0.15em] text-gray-400 border-b border-gray-800 pb-3">
                <span class="text-primary-500 mr-2">◇</span>
                {category}
              </h3>
              <div class="space-y-0">
                {categoryLinks.map((link) => (
                  <a
                    href={link.url}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="group block py-4 px-4 -mx-4 border-b border-gray-800 default-transition hover:bg-gray-900 relative before:absolute before:left-0 before:top-0 before:bottom-0 before:w-0 before:bg-primary-500 before:transition-all before:duration-200 hover:before:w-1"
                  >
                    <div class="flex items-start gap-3">
                      <div class="flex-1 min-w-0">
                        <div class="flex items-center gap-2 mb-1">
                          <h4 class="font-[Fraunces] text-base text-gray-100 group-hover:text-gray-50 default-transition">
                            {link.title}
                          </h4>
                          <ExternalLink class="w-3 h-3 text-gray-600 group-hover:text-primary-500 default-transition flex-shrink-0" />
                        </div>
                        <p
                          class="text-gray-500 text-sm line-clamp-2"
                          title={link.description}
                        >
                          {link.description}
                        </p>
                      </div>
                    </div>
                  </a>
                ))}
              </div>
            </div>
          ))
        }

        {
          Object.keys(groupedLinks).length === 0 && (
            <div class="text-center py-12">
              <p class="font-mono text-sm text-gray-600">
                <span class="text-primary-500">$</span> No links yet. Start
                collecting!
              </p>
            </div>
          )
        }
      </div>
    </div>
  </main>

  <Footer class="max-w-3xl border-t border-gray-800">
    <div
      class="flex items-center justify-center mt-4 md:block md:order-1 md:mt-0"
    >
      <a
     class="default-focus mt-4 default-transition group inline-flex items-center justify-center space-x-2 px-3 py-1 font-mono text-xs uppercase tracking-wider text-gray-400 hover:text-primary-500 bg-gray-900 hover:bg-gray-800 border border-gray-800 hover:border-primary-500/50"
        href="/"
      >
        <ArrowLeft
          class="w-4 h-4 default-transition transform group-hover:-translate-x-1"
        />
        <span>Go back</span>
      </a>
    </div>
  </Footer>
</Document>
