---
import { Tag } from "lucide-preact";
import { generateTagSlug } from "~/utils/seo";

export interface Props {
	tags: string[];
	class?: string;
	variant?: "default" | "compact";
}

const { tags, class: className, variant = "default" } = Astro.props;

// Don't render if no tags
if (!tags || tags.length === 0) {
	return null;
}

const tagsWithSlugs = tags.map((tag) => ({
	name: tag,
	slug: generateTagSlug(tag),
}));
---

<div class:list={["flex items-center flex-wrap gap-2", className]}>
	{
		variant === "default" && (
			<Tag class="w-3.5 h-3.5 text-gray-500 flex-shrink-0" />
		)
	}
	{
		tagsWithSlugs.map(({ name, slug }) => (
			<a
				href={`/tags/${slug}`}
				class:list={[
					"default-transition default-focus",
					variant === "default" &&
						"font-mono text-xs text-gray-500 hover:text-primary-500 bg-gray-900/50 hover:bg-gray-900 border border-gray-800 hover:border-primary-500/50 px-2 py-1",
					variant === "compact" &&
						"font-mono text-xs text-gray-600 hover:text-primary-500",
				]}
			>
				{name}
			</a>
		))
	}
</div>
